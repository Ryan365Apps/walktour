{"mappings":"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","sources":["src/index.ts","src/components/Walktour.tsx","src/components/Mask.tsx","src/utils/viewport.ts","src/utils/dom.ts","src/utils/constants.ts","src/utils/positioning.ts","src/utils/offset.ts","src/components/Tooltip.tsx","src/defaultstyles.ts","src/utils/scroll.ts","src/utils/tour.ts"],"sourcesContent":["import { Walktour } from './components/Walktour';\r\nimport { Mask, MaskOptions } from './components/Mask';\r\nimport type { Step, WalktourProps, WalktourOptions, WalktourLogic } from './components/Walktour';\r\nimport { CardinalOrientation } from './utils/positioning';\r\nimport type { Coords, Dims, ElementInfo } from './utils/dom';\r\n\r\nexport { Walktour }\r\nexport { Mask };\r\n\r\nexport { Step };\r\nexport { MaskOptions };\r\nexport { WalktourProps };\r\nexport { WalktourLogic };\r\nexport { WalktourOptions };\r\nexport { CardinalOrientation };\r\nexport { Coords, Dims, ElementInfo };\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport { Mask, MaskOptions } from './Mask';\r\nimport { Tooltip } from './Tooltip';\r\nimport { CardinalOrientation, OrientationCoords, getTargetPosition, getTooltipPosition } from '../utils/positioning';\r\nimport { Coords, getNearestScrollAncestor, getValidPortalRoot, Dims, getElementDims, getTargetInfo } from '../utils/dom';\r\nimport { scrollToDestination } from '../utils/scroll';\r\nimport { centerViewportAroundElements } from '../utils/offset';\r\nimport { debounce, getIdString, shouldUpdate, setFocusTrap, setTargetWatcher, setTourUpdateListener, shouldScroll, setNextOnTargetClick } from '../utils/tour';\r\n\r\nexport interface WalktourLogic {\r\n  next: (fromTarget?: boolean) => void;\r\n  prev: () => void;\r\n  close: (reset?: boolean) => void;\r\n  goToStep: (stepNumber: number) => void;\r\n  stepContent: Step;\r\n  stepIndex: number;\r\n  allSteps: Step[];\r\n  tooltipPosition: OrientationCoords;\r\n}\r\n\r\nexport interface WalktourOptions {\r\n  disableMaskInteraction?: boolean;\r\n  disableCloseOnClick?: boolean;\r\n  orientationPreferences?: CardinalOrientation[];\r\n  maskPadding?: number;\r\n  maskRadius?: number;\r\n  tooltipSeparation?: number;\r\n  transition?: string;\r\n  customTitleRenderer?: (title?: string, tourLogic?: WalktourLogic) => JSX.Element;\r\n  customDescriptionRenderer?: (description: string, tourLogic?: WalktourLogic) => JSX.Element;\r\n  customFooterRenderer?: (tourLogic?: WalktourLogic) => JSX.Element;\r\n  customTooltipRenderer?: (tourLogic?: WalktourLogic) => JSX.Element;\r\n  customNextFunc?: (tourLogic: WalktourLogic, fromTarget?: boolean) => void;\r\n  customPrevFunc?: (tourLogic: WalktourLogic) => void;\r\n  customCloseFunc?: (tourLogic: WalktourLogic) => void;\r\n  prevLabel?: string;\r\n  nextLabel?: string;\r\n  closeLabel?: string;\r\n  disableNext?: boolean;\r\n  disablePrev?: boolean;\r\n  disableClose?: boolean;\r\n  disableAutoScroll?: boolean;\r\n  getPositionFromCandidates?: (candidates: OrientationCoords[]) => OrientationCoords;\r\n  movingTarget?: boolean;\r\n  updateInterval?: number;\r\n  renderTolerance?: number;\r\n  disableMask?: boolean;\r\n  renderMask?: (maskOptions: MaskOptions) => JSX.Element;\r\n  disableSmoothScroll?: boolean;\r\n  allowForeignTarget?: boolean;\r\n  nextOnTargetClick?: boolean;\r\n  validateNextOnTargetClick?: () => Promise<boolean>;\r\n}\r\n\r\nexport interface Step extends WalktourOptions {\r\n  selector: string;\r\n  title?: string;\r\n  description: string;\r\n}\r\n\r\nexport interface WalktourProps extends WalktourOptions {\r\n  steps: Step[];\r\n  initialStepIndex?: number;\r\n  zIndex?: number;\r\n  rootSelector?: string;\r\n  identifier?: string;\r\n  setUpdateListener?: (update: () => void) => void;\r\n  removeUpdateListener?: (update: () => void) => void;\r\n  disableListeners?: boolean;\r\n  isOpen?: boolean;\r\n  debug?: boolean;\r\n}\r\n\r\nconst walktourDefaultProps: Partial<WalktourProps> = {\r\n  maskPadding: 5,\r\n  maskRadius: 0,\r\n  tooltipSeparation: 10,\r\n  transition: 'top 300ms ease, left 300ms ease',\r\n  disableMaskInteraction: false,\r\n  disableCloseOnClick: false,\r\n  zIndex: 9999,\r\n  renderTolerance: 2,\r\n  updateInterval: 500\r\n}\r\n\r\nconst basePortalString: string = 'walktour-portal';\r\nconst baseMaskString: string = 'walktour-mask';\r\nconst baseTooltipContainerString: string = 'walktour-tooltip-container';\r\n\r\nexport const Walktour = (props: WalktourProps) => {\r\n\r\n  const {\r\n    steps,\r\n    initialStepIndex,\r\n    isOpen\r\n  } = props;\r\n\r\n  const controlled = isOpen !== undefined;\r\n  const [isOpenState, setIsOpenState] = React.useState<boolean>(isOpen == undefined);\r\n  const [target, setTarget] = React.useState<HTMLElement>(undefined);\r\n  const [tooltipPosition, setTooltipPosition] = React.useState<OrientationCoords>(undefined);\r\n  const [currentStepIndex, setCurrentStepIndex] = React.useState<number>(initialStepIndex || 0);\r\n  const [tourRoot, setTourRoot] = React.useState<Element>(undefined);\r\n\r\n  const cleanupRefs = React.useRef<Array<() => void>>([]);\r\n  const tooltip = React.useRef<HTMLElement>(undefined);\r\n  const portal = React.useRef<HTMLElement>(undefined);\r\n  const targetPosition = React.useRef<Coords>(undefined);\r\n  const targetSize = React.useRef<Dims>(undefined);\r\n\r\n  const currentStepContent: Step = steps[currentStepIndex];\r\n  const tourOpen: boolean = controlled ? isOpen : isOpenState;\r\n\r\n  const options: WalktourOptions & WalktourProps & Step = {\r\n    ...walktourDefaultProps,\r\n    ...props,\r\n    ...currentStepContent\r\n  }\r\n\r\n  const {\r\n    selector,\r\n    maskPadding,\r\n    maskRadius,\r\n    disableMaskInteraction,\r\n    disableCloseOnClick,\r\n    tooltipSeparation,\r\n    transition,\r\n    orientationPreferences,\r\n    customTooltipRenderer,\r\n    zIndex,\r\n    rootSelector,\r\n    customNextFunc,\r\n    customPrevFunc,\r\n    customCloseFunc,\r\n    disableClose,\r\n    disableNext,\r\n    disablePrev,\r\n    disableAutoScroll,\r\n    identifier,\r\n    getPositionFromCandidates,\r\n    movingTarget,\r\n    renderTolerance,\r\n    updateInterval,\r\n    disableMask,\r\n    setUpdateListener,\r\n    removeUpdateListener,\r\n    disableListeners,\r\n    disableSmoothScroll,\r\n    debug,\r\n    allowForeignTarget,\r\n    nextOnTargetClick,\r\n    validateNextOnTargetClick,\r\n    renderMask\r\n  } = options;\r\n\r\n  React.useEffect(() => {\r\n    return cleanup;\r\n  }, []);\r\n\r\n  // set/reset the tour root \r\n  React.useEffect(() => {\r\n    let root: Element;\r\n    if (rootSelector) {\r\n      root = document.querySelector(rootSelector);\r\n    }\r\n    if (!root) {\r\n      root = getNearestScrollAncestor(portal.current);\r\n    }\r\n\r\n    if (tourOpen !== false && root !== tourRoot) {\r\n      setTourRoot(root);\r\n    }\r\n  }, [rootSelector, portal.current, tourOpen])\r\n\r\n  // update tour when step changes\r\n  React.useEffect(() => {\r\n    if (debug) {\r\n      console.log(`walktour debug (${identifier ? `${identifier}, ` : \"\"}${currentStepIndex}):`, {\r\n        \"options:\": options,\r\n        \"tour logic:\": tourLogic,\r\n        \"previous state/vars:\": {\r\n          isOpenState,\r\n          tourRoot,\r\n          target,\r\n          tooltipPosition,\r\n          targetPosition,\r\n          currentStepIndex,\r\n          targetSize,\r\n        }\r\n      })\r\n    }\r\n    if (tooltip.current && tourOpen) {\r\n      tooltip.current.focus();\r\n      updateTour();\r\n    } else {\r\n      cleanup();\r\n    }\r\n  }, [currentStepIndex, currentStepContent, tourOpen, tourRoot, tooltip.current])\r\n  \r\n  // update tooltip and target position in state\r\n  const updateTour = () => {\r\n    cleanup();\r\n    const root: Element = tourRoot;\r\n    const tooltipContainer: HTMLElement = tooltip.current;\r\n\r\n    if (!root || !tooltipContainer) {\r\n      setTarget(null);\r\n      setTooltipPosition(null);\r\n      targetPosition.current = null;\r\n      targetSize.current = null;\r\n      return;\r\n    }\r\n\r\n    const targetScope: Element | Document = allowForeignTarget ? document : root;\r\n    const getTarget = (): HTMLElement => targetScope.querySelector(selector);\r\n    const currentTarget: HTMLElement = getTarget();\r\n    const currentTargetPosition: Coords = getTargetPosition(root, currentTarget);\r\n    const currentTargetDims: Dims = getElementDims(currentTarget);\r\n    const smartPadding: number = disableMask ? 0 : maskPadding;\r\n    \r\n    const tooltipPosition: OrientationCoords = getTooltipPosition({\r\n      target: currentTarget,\r\n      tooltip: tooltipContainer,\r\n      padding: smartPadding,\r\n      tooltipSeparation,\r\n      orientationPreferences,\r\n      root,\r\n      getPositionFromCandidates,\r\n      disableAutoScroll,\r\n      allowForeignTarget,\r\n      selector\r\n    });\r\n\r\n    setTarget(currentTarget);\r\n    setTooltipPosition(tooltipPosition);\r\n    targetPosition.current = currentTargetPosition;\r\n    targetSize.current = currentTargetDims;\r\n\r\n    //focus trap subroutine\r\n    const cleanupFocusTrap = setFocusTrap(tooltipContainer, currentTarget, disableMaskInteraction);\r\n    cleanupRefs.current.push(cleanupFocusTrap);\r\n\r\n    if (shouldScroll({\r\n      disableAutoScroll,\r\n      allowForeignTarget,\r\n      selector,\r\n      root,\r\n      target: currentTarget,\r\n      tooltip: tooltipContainer,\r\n      tooltipPosition: tooltipPosition.coords\r\n    })) {\r\n      scrollToDestination(root, centerViewportAroundElements(root, tooltipContainer, currentTarget, tooltipPosition.coords, currentTargetPosition), disableSmoothScroll)\r\n    }\r\n\r\n    if (!disableListeners) {\r\n      const conditionalUpdate = () => {\r\n        const availableTarget = getTarget();\r\n\r\n        if (shouldUpdate({\r\n          root,\r\n          tooltipPosition: tooltipPosition.coords,\r\n          tooltip: tooltipContainer,\r\n          target: availableTarget,\r\n          disableAutoScroll,\r\n          rerenderTolerance: renderTolerance,\r\n          targetCoords: targetPosition.current,\r\n          targetDims: targetSize.current,\r\n          allowForeignTarget,\r\n          selector,\r\n          getPositionFromCandidates,\r\n          orientationPreferences, \r\n          padding: smartPadding, \r\n          tooltipSeparation\r\n        })) {\r\n          updateTour();\r\n        }\r\n      }\r\n\r\n      const cleanupUpdateListener = setTourUpdateListener({ update: debounce(conditionalUpdate), customSetListener: setUpdateListener, customRemoveListener: removeUpdateListener });\r\n      cleanupRefs.current.push(cleanupUpdateListener)\r\n\r\n      // if the user requests a watcher and there's supposed to be a target\r\n      if (movingTarget && (currentTarget || selector)) {\r\n        const cleanupWatcher = setTargetWatcher(conditionalUpdate, updateInterval)\r\n        cleanupRefs.current.push(cleanupWatcher);\r\n      }\r\n\r\n      if (nextOnTargetClick && currentTarget) {\r\n        const cleanupTargetTether = setNextOnTargetClick(currentTarget, tourLogic.next, validateNextOnTargetClick)\r\n        cleanupRefs.current.push(cleanupTargetTether);\r\n      }\r\n    }\r\n  }\r\n\r\n  const goToStep = (stepIndex: number) => {\r\n    if (stepIndex >= steps.length || stepIndex < 0) {\r\n      return;\r\n    }\r\n    setCurrentStepIndex(stepIndex);\r\n  }\r\n\r\n  const cleanup = () => {\r\n    cleanupRefs.current.forEach(f => f());\r\n    cleanupRefs.current = [];\r\n  }\r\n\r\n  const closeTour = (reset?: boolean) => {\r\n    reset && goToStep(0);\r\n    !controlled && setIsOpenState(false);\r\n    cleanup();\r\n    target && target.focus(); // return focus to last target when closed\r\n  }\r\n\r\n  const baseLogic: WalktourLogic = {\r\n    next: () => goToStep(currentStepIndex + 1),\r\n    prev: () => goToStep(currentStepIndex - 1),\r\n    close: (reset?: boolean) => closeTour(reset),\r\n    goToStep: goToStep,\r\n    stepContent: { ...options }, //pass options in as well to expose any defaults that aren't specified\r\n    stepIndex: currentStepIndex,\r\n    allSteps: steps,\r\n    tooltipPosition\r\n  };\r\n\r\n  const tourLogic: WalktourLogic = {\r\n    ...baseLogic,\r\n    ...customNextFunc && { next: (fromTarget?: boolean) => customNextFunc(baseLogic, fromTarget) },\r\n    ...customPrevFunc && { prev: () => customPrevFunc(baseLogic) },\r\n    ...customCloseFunc && { close: () => customCloseFunc(baseLogic) }\r\n  };\r\n\r\n  const keyPressHandler = (event: React.KeyboardEvent) => {\r\n    switch (event.key) {\r\n      case \"Escape\":\r\n        event.preventDefault();\r\n        if (!disableClose) {\r\n          tourLogic.close();\r\n        }\r\n        break;\r\n      case \"ArrowRight\":\r\n        event.preventDefault();\r\n        if (!disableNext) {\r\n          tourLogic.next()\r\n        }\r\n        break;\r\n      case \"ArrowLeft\":\r\n        event.preventDefault();\r\n        if (!disablePrev) {\r\n          tourLogic.prev();\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  //don't render if the tour is hidden or if there's no step data\r\n  if (!tourOpen || !currentStepContent) {\r\n    return null;\r\n  };\r\n\r\n  const portalStyle: React.CSSProperties = {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    zIndex: zIndex,\r\n    visibility: tooltipPosition ? 'visible' : 'hidden',\r\n    pointerEvents: \"none\"\r\n  }\r\n\r\n  const tooltipContainerStyle: React.CSSProperties = {\r\n    position: 'absolute',\r\n    top: tooltipPosition?.coords?.y,\r\n    left: tooltipPosition?.coords?.x,\r\n    transition: transition,\r\n    pointerEvents: 'auto'\r\n  }\r\n\r\n  const MaskTag = renderMask ? renderMask : Mask;\r\n\r\n  // render mask, tooltip, and their shared \"portal\" container\r\n  const render = () => (\r\n    <div\r\n      ref={ref => portal.current = ref}\r\n      id={getIdString(basePortalString, identifier)}\r\n      style={portalStyle}\r\n    >\r\n      {tourRoot &&\r\n        <>\r\n          {!disableMask &&\r\n            <MaskTag\r\n              maskId={getIdString(baseMaskString, identifier)}\r\n              targetInfo={getTargetInfo(tourRoot, target)}\r\n              disableMaskInteraction={disableMaskInteraction}\r\n              disableCloseOnClick={disableCloseOnClick}\r\n              padding={maskPadding}\r\n              radius={maskRadius}\r\n              tourRoot={tourRoot}\r\n              close={tourLogic.close}\r\n            />\r\n          }\r\n\r\n          <div\r\n            ref={ref => tooltip.current = ref}\r\n            id={getIdString(baseTooltipContainerString, identifier)}\r\n            style={tooltipContainerStyle}\r\n            onKeyDown={keyPressHandler}\r\n            tabIndex={0}\r\n          >\r\n            {customTooltipRenderer\r\n              ? customTooltipRenderer(tourLogic)\r\n              : <Tooltip\r\n                {...tourLogic}\r\n              />\r\n            }\r\n          </div>\r\n        </>\r\n      }\r\n    </div>);\r\n\r\n  // on first render, put everything in its normal context.\r\n  // after first render (once we've determined the tour root) spawn a portal there for rendering.\r\n  if (tourRoot) {\r\n    return ReactDOM.createPortal(render(), getValidPortalRoot(tourRoot));\r\n  } else {\r\n    return render();\r\n  }\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { Coords, Dims, ElementInfo } from '../utils/dom';\r\nimport { getViewportScrollDims } from '../utils/viewport';\r\n\r\nexport interface MaskOptions {\r\n  targetInfo?: ElementInfo;\r\n  padding: number;\r\n  radius: number;\r\n  close: () => void;\r\n  tourRoot: Element;\r\n  disableMaskInteraction?: boolean;\r\n  disableCloseOnClick?: boolean;\r\n  maskId: string;\r\n}\r\n\r\nexport function Mask(props: MaskOptions): JSX.Element {\r\n  const { targetInfo, disableMaskInteraction, padding, radius, tourRoot, close, disableCloseOnClick, maskId } = props;\r\n  const {width: containerWidth, height: containerHeight} = getViewportScrollDims(tourRoot);\r\n  const pathId = `clip-path-${maskId}`;\r\n\r\n  const getCutoutPath = (target?: {coords: Coords, dims: Dims}): string => {\r\n    if (!target) {\r\n      return '';\r\n    }\r\n\r\n    const {\r\n      dims,\r\n      coords\r\n    } = target;\r\n\r\n    const cutoutTop: number = coords.y - padding;\r\n    const cutoutLeft: number = coords.x - padding;\r\n    const cutoutRight: number = coords.x + dims.width + padding;\r\n    const cutoutBottom: number = coords.y + dims.height + padding;\r\n\r\n    if (radius > 0) {\r\n      return `M 0, 0\r\n              L 0, ${containerHeight}\r\n              L ${cutoutLeft}, ${containerHeight}\r\n              L ${cutoutLeft}, ${cutoutTop + radius}\r\n              Q ${cutoutLeft}, ${cutoutTop}, ${cutoutLeft + radius}, ${cutoutTop}\r\n              L ${cutoutRight - radius}, ${cutoutTop}\r\n              Q ${cutoutRight}, ${cutoutTop}, ${cutoutRight}, ${cutoutTop + radius}\r\n              L ${cutoutRight}, ${cutoutBottom - radius}\r\n              Q ${cutoutRight}, ${cutoutBottom}, ${cutoutRight - radius}, ${cutoutBottom}\r\n              L ${cutoutLeft + radius}, ${cutoutBottom}\r\n              Q ${cutoutLeft}, ${cutoutBottom}, ${cutoutLeft}, ${cutoutBottom - radius}\r\n              L ${cutoutLeft}, ${containerHeight}\r\n              L ${containerWidth}, ${containerHeight}\r\n              L ${containerWidth}, 0`;\r\n    }\r\n\r\n    return `M 0, 0\r\n            L 0, ${containerHeight}\r\n            L ${cutoutLeft}, ${containerHeight}\r\n            L ${cutoutLeft}, ${cutoutTop}\r\n            L ${cutoutRight}, ${cutoutTop}\r\n            L ${cutoutRight}, ${cutoutBottom}\r\n            L ${cutoutLeft}, ${cutoutBottom}\r\n            L ${cutoutLeft}, ${containerHeight}\r\n            L ${containerWidth}, ${containerHeight}\r\n            L ${containerWidth}, 0`;\r\n  }\r\n\r\n  const svgStyle: React.CSSProperties = {\r\n    height: containerHeight,\r\n    width: containerWidth,\r\n    pointerEvents: disableMaskInteraction ? 'auto' : 'none',\r\n  }\r\n\r\n  return (\r\n    <svg style={svgStyle}>\r\n      {targetInfo &&\r\n        <defs>\r\n          <clipPath id={pathId}>\r\n            <path d={getCutoutPath(targetInfo)}\r\n            />\r\n          </clipPath>\r\n        </defs>\r\n      }\r\n\r\n      <rect\r\n        onClick={disableCloseOnClick ? undefined : close}\r\n        x={0}\r\n        y={0}\r\n        width={containerWidth}\r\n        height={containerHeight}\r\n        fill='black'\r\n        fillOpacity={0.3}\r\n        pointerEvents='auto'\r\n        clipPath={targetInfo ? `url(#${pathId})` : undefined}\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import { Dims, Coords, getElementCoords, isDefaultScrollingElement, getElementDims, isWithinAt } from \"./dom\";\r\nimport { addAppropriateOffset, getCurrentScrollOffset } from \"./offset\";\r\n\r\nexport function getViewportHeight(root: Element): number {\r\n  return root.clientHeight;\r\n}\r\n\r\nexport function getViewportWidth(root: Element): number {\r\n  return root.clientWidth;\r\n}\r\n\r\nexport function getViewportDims(root: Element): Dims {\r\n  return {\r\n    width: getViewportWidth(root),\r\n    height: getViewportHeight(root)\r\n  }\r\n}\r\n\r\nexport function getViewportScrollHeight(root: Element): number {\r\n  return root.scrollHeight;\r\n}\r\n\r\nexport function getViewportScrollWidth(root: Element): number {\r\n  return root.scrollWidth;\r\n}\r\n\r\nexport function getViewportScrollDims(root: Element): Dims {\r\n  return {\r\n    width: getViewportScrollWidth(root),\r\n    height: getViewportScrollHeight(root)\r\n  }\r\n}\r\n\r\nexport function getViewportStart(root: Element): Coords {\r\n  if (isDefaultScrollingElement(root)) {\r\n    return {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n  } else {\r\n    return getElementCoords(root);\r\n  }\r\n}\r\n\r\nexport function getViewportEnd(root: Element): Coords {\r\n  const startCoords: Coords = getViewportStart(root);\r\n  return {\r\n    x: startCoords.x + getViewportWidth(root),\r\n    y: startCoords.y + getViewportHeight(root)\r\n  }\r\n}\r\n\r\n\r\nexport function getViewportScrollStart(root: Element): Coords {\r\n  const curScrollOffset: Coords = getCurrentScrollOffset(root);\r\n  const start: Coords = getViewportStart(root);\r\n\r\n  return {\r\n    x: start.x - curScrollOffset.x,\r\n    y: start.y - curScrollOffset.y\r\n  }\r\n}\r\n\r\nexport function getViewportScrollEnd(root: Element): Coords {\r\n  const startCoords: Coords = getViewportScrollStart(root);\r\n  const { width, height } = getViewportScrollDims(root);\r\n  return {\r\n    x: startCoords.x + width,\r\n    y: startCoords.y + height\r\n  };\r\n}\r\n\r\nexport function isElementInView(root: Element, element: HTMLElement, atPosition?: Coords, needsAdjusting?: boolean): boolean {\r\n  if (!root || !element) {\r\n    return false;\r\n  }\r\n  const explicitPosition: Coords = atPosition && (needsAdjusting ? addAppropriateOffset(root, atPosition) : atPosition)\r\n  const position: Coords = explicitPosition || addAppropriateOffset(root, getElementCoords(element));\r\n  const elementDims: Dims = getElementDims(element);\r\n  const startCoords: Coords = addAppropriateOffset(root, getViewportStart(root));\r\n  const viewportDims: Dims = getViewportDims(root);\r\n\r\n  return isWithinAt(elementDims, viewportDims, position, startCoords);\r\n}\r\n\r\n// if directed to scroll to a position which is outside the bounds of the scrolling container, the \r\n// viewport will stop at the edges of that container. We want to get the coords that the viewport\r\n// will end up when given certain coords\r\nexport function getScrolledViewportPosition(root: Element, scrollDestination: Coords) {\r\n  const dims = getViewportDims(root);\r\n  const startCoords = getViewportScrollStart(root);\r\n  const endCoords = getViewportScrollEnd(root);\r\n\r\n  const rightmost = endCoords.x - dims.width;\r\n  const bottommost = endCoords.y - dims.height;\r\n\r\n  let coords: Coords = scrollDestination;\r\n\r\n  if (scrollDestination.x < startCoords.x) {\r\n    coords.x = startCoords.x;\r\n  } else if (scrollDestination.x > rightmost) {\r\n    coords.x = rightmost;\r\n  } else {\r\n    coords.x = scrollDestination.x;\r\n  }\r\n\r\n  if (scrollDestination.y < startCoords.y) {\r\n    coords.y = startCoords.y;\r\n  } else if (scrollDestination.y > bottommost) {\r\n    coords.y = bottommost;\r\n  } else {\r\n    coords.y = scrollDestination.y;\r\n  }\r\n\r\n  return coords;\r\n}","import { focusableSelector } from \"./constants\";\r\nimport { getTargetPosition } from \"./positioning\";\r\n\r\nexport interface Coords {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport interface Dims {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nexport interface ElementInfo {\r\n  dims: Dims;\r\n  coords: Coords;\r\n}\r\n\r\nexport function isValidCoords(coords: Coords): boolean {\r\n  if (!coords) {\r\n    return false;\r\n  } else if ((!coords.x && coords.x !== 0) || (!coords.y && coords.y !== 0)) {\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport function isValidDims(dims: Dims): boolean {\r\n  if (!dims) {\r\n    return false;\r\n  } else if ((!dims.height && dims.height !== 0) || (!dims.width && dims.height !== 0)) {\r\n    return false;\r\n  } else if (dims.height < 0 || dims.width < 0) {\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport function dist(a: Coords, b: Coords): number {\r\n  if (!isValidCoords(a) || !isValidCoords(b)) {\r\n    return;\r\n  }\r\n\r\n  return Math.sqrt(\r\n    Math.pow((Math.abs(a.x - b.x)), 2) +\r\n    Math.pow((Math.abs(a.y - b.y)), 2))\r\n}\r\n\r\nexport function areaDiff(a: Dims, b: Dims): number {\r\n  if (!isValidDims(a) || !isValidDims(b)) {\r\n    return;\r\n  }\r\n\r\n  return Math.abs((a.height * a.width) - (b.height * b.width));\r\n}\r\n\r\nexport function getElementCoords(element: Element): Coords {\r\n  if (!element) {\r\n    return;\r\n  }\r\n  const elementData: ClientRect = element.getBoundingClientRect();\r\n  return {\r\n    x: elementData.left,\r\n    y: elementData.top\r\n  }\r\n}\r\n\r\nexport function getElementDims(element: Element): Dims {\r\n  if (!element) {\r\n    return;\r\n  }\r\n  const elementData = element.getBoundingClientRect();\r\n  return {\r\n    width: elementData.width,\r\n    height: elementData.height\r\n  }\r\n}\r\n\r\n//https://gist.github.com/gre/296291b8ce0d8fe6e1c3ea4f1d1c5c3b\r\nexport function getNearestScrollAncestor(element: Element): Element {\r\n  const regex = /(auto|scroll)/;\r\n\r\n  const style = (el: Element, prop: string) =>\r\n    getComputedStyle(el, null).getPropertyValue(prop);\r\n\r\n  const scroll = (el: Element) =>\r\n    regex.test(\r\n      style(el, \"overflow\") +\r\n      style(el, \"overflow-y\") +\r\n      style(el, \"overflow-x\"));\r\n\r\n  if (!element || isDefaultScrollingElement(element)) {\r\n    return getDefaultScrollingElement();\r\n  } else {\r\n    if (scroll(element)) {\r\n      return element;\r\n    } else {\r\n      return getNearestScrollAncestor(element.parentElement)\r\n    }\r\n  }\r\n}\r\n\r\n//https://github.com/GreenGremlin/scroll-doc/blob/master/index.js\r\nexport function getDefaultScrollingElement(): Element {\r\n  const windowStart: number = window.pageYOffset; //slightly better support than scrollY\r\n  document.documentElement.scrollTop = windowStart + 1;\r\n  if (window.pageXOffset > windowStart) {\r\n    document.documentElement.scrollTop = windowStart; //reset\r\n    return document.documentElement;\r\n  } else {\r\n    return document.scrollingElement || document.body;\r\n  }\r\n}\r\n\r\nexport function isDefaultScrollingElement(root: Element) {\r\n  return root.isSameNode(document.body) || root.isSameNode(document.scrollingElement) || root.isSameNode(document.documentElement);\r\n}\r\n\r\n//if we're not putting the portal in a custom container, it needs to be at the body level\r\nexport function getValidPortalRoot(root: Element) {\r\n  // check for the potential default scrolling elements that might be returned from the above function\r\n  if (isDefaultScrollingElement(root)) {\r\n    return document.body;\r\n  } else {\r\n    return root;\r\n  }\r\n}\r\n\r\nexport function getCombinedData(aCoords: Coords, aDims: Dims, bCoords: Coords, bDims: Dims): { coords: Coords, dims: Dims } {\r\n\r\n  // generates similar data as getBoundingClientRect but using hypothetical positions\r\n  const generateBounds = (coords: Coords, dims: Dims): { left: number, right: number, top: number, bottom: number } => {\r\n    return {\r\n      left: coords.x,\r\n      right: coords.x + dims.width,\r\n      top: coords.y,\r\n      bottom: coords.y + dims.height\r\n    }\r\n  }\r\n\r\n  const mostExtreme = (a: number, b: number, largest: boolean): number => {\r\n    return (a > b)\r\n      ? (largest ? a : b)\r\n      : (largest ? b : a)\r\n  }\r\n\r\n  const aBounds = generateBounds(aCoords, aDims);\r\n  const bBounds = generateBounds(bCoords, bDims);\r\n\r\n\r\n  const left: number = mostExtreme(aBounds.left, bBounds.left, false);\r\n  const right: number = mostExtreme(aBounds.right, bBounds.right, true);\r\n  const top: number = mostExtreme(aBounds.top, bBounds.top, false);\r\n  const bottom: number = mostExtreme(aBounds.bottom, bBounds.bottom, true);\r\n\r\n  return {\r\n    coords: {\r\n      x: left,\r\n      y: top\r\n    },\r\n    dims: {\r\n      height: bottom - top,\r\n      width: right - left\r\n    }\r\n  }\r\n}\r\n\r\n// determines if a can fit within b\r\nexport function fitsWithin(aDims: Dims, bDims: Dims) {\r\n  if (!isValidDims(aDims) || !isValidDims(bDims)) {\r\n    return false;\r\n  }\r\n\r\n  return aDims.height <= bDims.height && aDims.width <= bDims.width;\r\n}\r\n\r\n// determines if a does fit within b at the given coords\r\nexport function isWithinAt(aDims: Dims, bDims: Dims, aCoords?: Coords, bCoords?: Coords) {\r\n  if (!isValidDims(aDims) || !isValidDims(bDims)) {\r\n    return false;\r\n  }\r\n\r\n  const validCoordsA: Coords = isValidCoords(aCoords) ? aCoords : { x: 0, y: 0 };\r\n  const validCoordsB: Coords = isValidCoords(bCoords) ? bCoords : { x: 0, y: 0 };\r\n  const fitsDims: boolean = fitsWithin(aDims, bDims);\r\n  const fitsHorizontally: boolean = (validCoordsA.x >= validCoordsB.x) && (validCoordsA.x + aDims.width <= validCoordsB.x + bDims.width);\r\n  const fitsVertically: boolean = (validCoordsA.y >= validCoordsB.y) && (validCoordsA.y + aDims.height <= validCoordsB.y + bDims.height);\r\n\r\n  return fitsDims && fitsHorizontally && fitsVertically;\r\n}\r\n\r\nexport function getFocusableElements(root: Element, includeSelf?: boolean): HTMLElement[] {\r\n\r\n  const focusableChildren = root.querySelectorAll(focusableSelector)\r\n  let array: HTMLElement[] = [];\r\n  if (includeSelf && root.matches(focusableSelector)) {\r\n    array.push(root as HTMLElement);\r\n  }\r\n  if (focusableChildren.length > 0) {\r\n    focusableChildren.forEach(el => array.push(el as HTMLElement));\r\n  } \r\n\r\n  return array;\r\n}\r\n\r\n// helper function to get first/last focusable elements if possible\r\nexport function getEdgeFocusables(defaultElement: HTMLElement, container?: HTMLElement, includeSelf?: boolean): { start: HTMLElement, end: HTMLElement } {\r\n  if (container) {\r\n    const containerFocusables: HTMLElement[] = getFocusableElements(container, includeSelf);\r\n    if (containerFocusables.length > 0) {\r\n      return {\r\n        start: containerFocusables[0],\r\n        end: containerFocusables[containerFocusables.length - 1]\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    start: defaultElement,\r\n    end: defaultElement\r\n  }\r\n}\r\n\r\nexport function getTargetInfo(root: Element, target?: HTMLElement): ElementInfo | undefined {\r\n  if (!root || !target) {\r\n    return;\r\n  }\r\n  const dims: Dims = getElementDims(target);\r\n  const coords: Coords = getTargetPosition(root, target);\r\n\r\n  return {\r\n    coords,\r\n    dims\r\n  }\r\n}\r\n\r\nexport function isForeignTarget(root: Element, selector: string): boolean {\r\n  return !root.querySelector(selector);\r\n}\r\n","export const TAB_KEYCODE = 9;\r\n\r\n//  selector adapted from https://gist.github.com/r3lk3r/0030bab99347a2326334e00b23188cab#file-focusloopingutil-js\r\nexport const focusableSelector: string = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, [tabindex]:not([tabindex^=\"-\"]):not([disabled]), [contenteditable]';\r\n","\r\nimport { Coords, getElementCoords, dist, getElementDims, Dims, getCombinedData, fitsWithin, isWithinAt, isForeignTarget } from \"./dom\";\r\nimport { getViewportCenter, addAppropriateOffset, applyCenterOffset, centerViewportAroundElements, centerViewportAroundElement, getCurrentScrollOffset } from \"./offset\";\r\nimport { getViewportDims, getViewportScrollEnd, getScrolledViewportPosition, getViewportScrollStart, isElementInView, getViewportStart } from \"./viewport\";\r\n\r\nexport enum CardinalOrientation {\r\n  EAST = 'east',\r\n  SOUTH = 'south',\r\n  WEST = 'west',\r\n  NORTH = 'north',\r\n  CENTER = 'center',\r\n  EASTNORTH = 'east-north',\r\n  EASTSOUTH = 'east-south',\r\n  SOUTHEAST = 'south-east',\r\n  SOUTHWEST = 'south-west',\r\n  WESTSOUTH = 'west-south',\r\n  WESTNORTH = 'west-north',\r\n  NORTHWEST = 'north-west',\r\n  NORTHEAST = 'north-east'\r\n}\r\n\r\nexport interface OrientationCoords {\r\n  orientation: CardinalOrientation;\r\n  coords: Coords;\r\n}\r\n\r\nexport interface GetTooltipPositionArgs {\r\n  target: HTMLElement;\r\n  tooltip: HTMLElement;\r\n  padding: number;\r\n  tooltipSeparation: number;\r\n  root: Element;\r\n  orientationPreferences?: CardinalOrientation[];\r\n  getPositionFromCandidates?: (candidates: OrientationCoords[]) => OrientationCoords;\r\n  disableAutoScroll?: boolean;\r\n  allowForeignTarget?: boolean;\r\n  selector?: string;\r\n}\r\n\r\nfunction getTooltipPositionCandidates(target: HTMLElement, tooltip: HTMLElement, padding: number, tooltipDistance: number, includeAllPositions?: boolean): OrientationCoords[] {\r\n  if (!target || !tooltip) {\r\n    return;\r\n  }\r\n\r\n  const tooltipDims: Dims = getElementDims(tooltip);\r\n  const targetCoords: Coords = getElementCoords(target);\r\n  const targetDims: Dims = getElementDims(target);\r\n  const centerX: number = targetCoords.x - ((tooltipDims.width - targetDims.width) / 2);\r\n  const centerY: number = targetCoords.y - ((tooltipDims.height - targetDims.height) / 2);\r\n  const eastOffset: number = targetCoords.x + targetDims.width + padding + tooltipDistance;\r\n  const southOffset: number = targetCoords.y + targetDims.height + padding + tooltipDistance;\r\n  const westOffset: number = targetCoords.x - tooltipDims.width - padding - tooltipDistance;\r\n  const northOffset: number = targetCoords.y - tooltipDims.height - padding - tooltipDistance;\r\n\r\n  const east: Coords = { x: eastOffset, y: centerY }\r\n  const south: Coords = { x: centerX, y: southOffset }\r\n  const west: Coords = { x: westOffset, y: centerY };\r\n  const north: Coords = { x: centerX, y: northOffset };\r\n  const center: Coords = applyCenterOffset(targetCoords, targetDims, tooltipDims);\r\n\r\n  const standardPositions = [\r\n    { orientation: CardinalOrientation.EAST, coords: east },\r\n    { orientation: CardinalOrientation.SOUTH, coords: south },\r\n    { orientation: CardinalOrientation.WEST, coords: west },\r\n    { orientation: CardinalOrientation.NORTH, coords: north },\r\n  ];\r\n\r\n  let additionalPositions: OrientationCoords[];\r\n  if (includeAllPositions) {\r\n    const eastAlign: number = targetCoords.x - (tooltipDims.width - targetDims.width) + padding;\r\n    const southAlign: number = targetCoords.y - (tooltipDims.height - targetDims.height) + padding;\r\n    const westAlign: number = targetCoords.x - padding;\r\n    const northAlign: number = targetCoords.y - padding;\r\n\r\n    const eastNorth: Coords = { x: eastOffset, y: northAlign }\r\n    const eastSouth: Coords = { x: eastOffset, y: southAlign }\r\n    const southEast: Coords = { x: eastAlign, y: southOffset }\r\n    const southWest: Coords = { x: westAlign, y: southOffset }\r\n    const westSouth: Coords = { x: westOffset, y: southAlign }\r\n    const westNorth: Coords = { x: westOffset, y: northAlign }\r\n    const northWest: Coords = { x: westAlign, y: northOffset }\r\n    const northEast: Coords = { x: eastAlign, y: northOffset }\r\n\r\n    additionalPositions = [\r\n      { orientation: CardinalOrientation.EASTNORTH, coords: eastNorth },\r\n      { orientation: CardinalOrientation.EASTSOUTH, coords: eastSouth },\r\n      { orientation: CardinalOrientation.SOUTHEAST, coords: southEast },\r\n      { orientation: CardinalOrientation.SOUTHWEST, coords: southWest },\r\n      { orientation: CardinalOrientation.WESTSOUTH, coords: westSouth },\r\n      { orientation: CardinalOrientation.WESTNORTH, coords: westNorth },\r\n      { orientation: CardinalOrientation.NORTHWEST, coords: northWest },\r\n      { orientation: CardinalOrientation.NORTHEAST, coords: northEast }\r\n    ]\r\n  }\r\n\r\n  return [\r\n    ...standardPositions,\r\n    ...additionalPositions,\r\n    { orientation: CardinalOrientation.CENTER, coords: center }\r\n  ]\r\n}\r\n\r\n// simple reducer who selects for coordinates closest to the current center of the viewport\r\nfunction getCenterReducer(root: Element, tooltip: HTMLElement, target: HTMLElement, predictViewport?: boolean):\r\n  ((acc: OrientationCoords, cur: OrientationCoords, ind: number, arr: OrientationCoords[]) => OrientationCoords) {\r\n  const currentCenter: Coords = getViewportCenter(root, tooltip);\r\n\r\n  // store the center of the predicted viewport location with the tooltip at acc\r\n  // to have a meaningful distance comparison\r\n  let accCenter: Coords = currentCenter;\r\n\r\n  const getCenter = (coords: Coords) => {\r\n    if (predictViewport && (!isElementInView(root, target) || !isElementInView(root, tooltip, coords, true))) {\r\n      return getViewportCenter(root, tooltip, getScrolledViewportPosition(root, centerViewportAroundElements(root, tooltip, target, coords)));\r\n    } else {\r\n      return currentCenter;\r\n    }\r\n  }\r\n\r\n  return (acc: OrientationCoords, cur: OrientationCoords, ind: number, arr: OrientationCoords[]): OrientationCoords => {\r\n    if (cur.orientation === CardinalOrientation.CENTER) { //ignore centered coords since those will always be closest to the center\r\n      if (ind === arr.length - 1 && acc === undefined) { //unless  we're at the end and we still haven't picked a coord\r\n        return cur;\r\n      } else {\r\n        return acc;\r\n      }\r\n    } else if (acc === undefined) {\r\n      accCenter = getCenter(cur.coords);\r\n      return cur;\r\n    } else {\r\n      const center: Coords = getCenter(cur.coords);\r\n\r\n      if (dist(center, cur.coords) > dist(accCenter, acc.coords)) {\r\n        return acc;\r\n      } else {\r\n        accCenter = center;\r\n        return cur;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// complex candidate reducer function that tries to place the tooltip as close to the center of the \r\n// screen as possible, even after the screen has scrolled to a particular location.\r\nfunction chooseBestTooltipPosition(preferredCandidates: OrientationCoords[], root: Element, tooltip: HTMLElement, target: HTMLElement, scrollDisabled: boolean): OrientationCoords {\r\n  if (preferredCandidates.length === 1) {\r\n    //if there's only a single pref candidate, use that\r\n    return preferredCandidates[0];\r\n  } else if (scrollDisabled) {\r\n    // if scrolling is disabled, there's not much we can do except use the naive center reducer\r\n    return preferredCandidates.reduce(getCenterReducer(root, tooltip, target, false), undefined);\r\n  } else {\r\n    // scrolling is allowed, which means we have to figure out:\r\n    // 1. what candidates are valid positions (not out of the scrolling root's bounds)\r\n    // 2. which positions are absolutely compatible (allow both target & tooltip to fit within the viewport at the same time)\r\n    // 3. which positions are currently compatible (allow both target & tooltip to fit with the CURRENT viewport)\r\n    // 4. which of those positions is *best* - use same closest-to-center heuristic.\r\n    // priority is 3 > 2 > 1 for the pool of positions from which 4 is chosen\r\n\r\n    const viewportDims: Dims = getViewportDims(root);\r\n    const viewportScrollStart: Coords = getViewportScrollStart(root);\r\n    const viewportCurrentStart: Coords = getViewportStart(root);\r\n    const viewportScrollEnd: Coords = getViewportScrollEnd(root);\r\n    const tooltipDims: Dims = getElementDims(tooltip);\r\n    const targetDims: Dims = getElementDims(target);\r\n    const targetCoords: Coords = getElementCoords(target);\r\n    const curriedGetCombinedData = (coords: Coords) => getCombinedData(coords, tooltipDims, targetCoords, targetDims);\r\n\r\n    const validPositions: OrientationCoords[] = preferredCandidates.filter(getInBoundsFilter(tooltipDims, viewportScrollStart, viewportScrollEnd));\r\n    const absoluteCompatiblePositions: OrientationCoords[] = validPositions.filter(getAbsoluteCompatibleArrangementFilter(curriedGetCombinedData, viewportDims));\r\n    const currentCompatiblePositions: OrientationCoords[] = absoluteCompatiblePositions.filter(getCurrentInViewFilter(curriedGetCombinedData, viewportDims, viewportCurrentStart));\r\n\r\n    // // if possible, use only those positions which don't force a scroll. Default back to those which can fit in the viewport, even if that means scrolling\r\n    const compatiblePositions: OrientationCoords[] = currentCompatiblePositions.length > 0 ? currentCompatiblePositions : absoluteCompatiblePositions;\r\n\r\n    // if there are NO compatible positions, the viewport is too small to accomodate both the target/tooltip, in any arrangement.\r\n    // we default to our valid positions, even if that means placing the elements slightly off screen.\r\n    const filteredList = compatiblePositions.length > 0 ? compatiblePositions : validPositions;\r\n\r\n    return filteredList.reduce(getCenterReducer(root, tooltip, target, true), undefined);\r\n  }\r\n}\r\n\r\n// filter out any positions which would have the tooltip be out of the bounds of the root container \r\n// (i.e. in a position that the viewport can't \"reach\"/scroll to)\r\nfunction getInBoundsFilter(tooltipDims: Dims, viewportScrollStart: Coords, viewportScrollEnd: Coords): (oc: OrientationCoords) => boolean {\r\n  return (oc: OrientationCoords): boolean => {\r\n    const coords: Coords = oc.coords;\r\n    return !(coords.x < viewportScrollStart.x || coords.y < viewportScrollStart.y ||\r\n      (coords.x + tooltipDims.width) > viewportScrollEnd.x || (coords.y + tooltipDims.height) > viewportScrollEnd.y)\r\n  }\r\n}\r\n\r\n// filters out any positions which would cause the target/tooltip to not fit within the viewport\r\nfunction getAbsoluteCompatibleArrangementFilter(curriedGetCombinedData: (coords: Coords) => { dims: Dims, coords: Coords }, viewportDims: Dims): (oc: OrientationCoords) => boolean {\r\n  return (oc: OrientationCoords): boolean => {\r\n    const coords: Coords = oc.coords;\r\n    // we only care about the resultant dims but the input coords are critical here\r\n    const { dims: combinedDims } = curriedGetCombinedData(coords);\r\n\r\n    return fitsWithin(combinedDims, viewportDims);\r\n  }\r\n}\r\n\r\nfunction getCurrentInViewFilter(curriedGetCombinedData: (coords: Coords) => { dims: Dims, coords: Coords }, viewportDims: Dims, viewportCurrentStart: Coords): (oc: OrientationCoords) => boolean {\r\n  return (oc: OrientationCoords): boolean => {\r\n    const coords: Coords = oc.coords;\r\n\r\n    const { dims: combinedDims, coords: combinedCoords } = curriedGetCombinedData(coords);\r\n\r\n    return isWithinAt(combinedDims, viewportDims, combinedCoords, viewportCurrentStart);\r\n  }\r\n}\r\n\r\nfunction getPreferredCandidates(candidates: OrientationCoords[], orientationPreferences?: CardinalOrientation[]): OrientationCoords[] {\r\n  if (!orientationPreferences || orientationPreferences.length === 0) {\r\n    return candidates;\r\n  } else if (orientationPreferences.length === 1) {\r\n    const specifiedCandidate = candidates.find((oc: OrientationCoords) => oc.orientation === orientationPreferences[0])\r\n    if (specifiedCandidate) {\r\n      return [specifiedCandidate];\r\n    } else {\r\n      return candidates; // if the specified orientation isn't available for whatever reason, default to standard behavior\r\n    }\r\n  } else {\r\n    const preferenceFilter = (cc: OrientationCoords) => orientationPreferences.indexOf(cc.orientation) !== -1;\r\n    return candidates.filter(preferenceFilter);\r\n  }\r\n}\r\n\r\nfunction restrictToCurrentViewport(root: Element, coords: Coords, dims: Dims, padding: number): Coords {\r\n  if (!root) {\r\n    return coords;\r\n  }\r\n\r\n  const viewportStart: Coords = getCurrentScrollOffset(root);\r\n  const viewportDims: Dims = getViewportDims(root);\r\n  const viewportEnd: Coords = {\r\n    x: viewportStart.x + viewportDims.width,\r\n    y: viewportStart.y + viewportDims.height\r\n  }\r\n  const sx = viewportStart.x + padding;\r\n  const sy = viewportStart.y + padding;\r\n  const ex = viewportEnd.x - dims.width - padding;\r\n  const ey = viewportEnd.y - dims.height - padding;\r\n\r\n  let x: number = coords.x;\r\n  let y: number = coords.y;\r\n\r\n  if (coords.x < sx) {\r\n    x = sx;\r\n  } else if ((coords.x + dims.width) > ex) {\r\n    x = ex;\r\n  }\r\n\r\n  if (coords.y < sy) {\r\n    y = sy;\r\n  } else if ((coords.y + dims.height) > ey) {\r\n    y = ey;\r\n  }\r\n\r\n  return { x, y }\r\n}\r\n\r\nexport function getTooltipPosition(args: GetTooltipPositionArgs): OrientationCoords {\r\n  const { target, tooltip, padding, tooltipSeparation, orientationPreferences, getPositionFromCandidates, root: tourRoot, disableAutoScroll: scrollDisabled, allowForeignTarget, selector } = args;\r\n  const center: Coords = target ? getViewportCenter(tourRoot, tooltip, getScrolledViewportPosition(tourRoot, centerViewportAroundElement(tourRoot, target))) : getViewportCenter(tourRoot, tooltip)\r\n  const defaultPosition: Coords = addAppropriateOffset(tourRoot, center);\r\n\r\n  if (!tooltip || !tourRoot) {\r\n    return;\r\n  }\r\n\r\n  if (!target) {\r\n    return {orientation: null, coords: defaultPosition};\r\n  }\r\n\r\n  const foreignTarget: boolean = allowForeignTarget && isForeignTarget(tourRoot, selector);\r\n  const noScroll: boolean = scrollDisabled || foreignTarget;\r\n  const candidates: OrientationCoords[] = getTooltipPositionCandidates(target, tooltip, padding, tooltipSeparation, true);\r\n  const choosePosition = getPositionFromCandidates || ((cans: OrientationCoords[]) => chooseBestTooltipPosition(cans, tourRoot, tooltip, target, noScroll));\r\n\r\n  const rawPosition: OrientationCoords = choosePosition(getPreferredCandidates(candidates, orientationPreferences)); //position relative to current viewport\r\n\r\n  if (!rawPosition) {\r\n    return {orientation: CardinalOrientation.CENTER, coords: defaultPosition};\r\n  }\r\n\r\n  const adjustedPosition: OrientationCoords = {orientation: rawPosition.orientation, coords: addAppropriateOffset(tourRoot, rawPosition.coords)};\r\n\r\n  if (foreignTarget) {\r\n    return {orientation: adjustedPosition.orientation, coords: restrictToCurrentViewport(tourRoot, adjustedPosition.coords, getElementDims(tooltip), padding + tooltipSeparation)}\r\n  }\r\n\r\n  return adjustedPosition;\r\n}\r\n\r\nexport function getTargetPosition(root: Element, target: HTMLElement): Coords {\r\n  return addAppropriateOffset(root, getElementCoords(target));\r\n}\r\n","import { Coords, getElementCoords, Dims, isDefaultScrollingElement, getCombinedData, getElementDims } from \"./dom\";\r\nimport { getViewportStart, getViewportDims } from \"./viewport\";\r\n\r\nexport function getCurrentScrollOffset(root: Element): Coords {\r\n  return {\r\n    x: root.scrollLeft,\r\n    y: root.scrollTop\r\n  }\r\n}\r\n\r\nexport function addScrollOffset(root: Element, coords: Coords) {\r\n  const curOffset: Coords = getCurrentScrollOffset(root);\r\n  return {\r\n    x: coords.x + curOffset.x,\r\n    y: coords.y + curOffset.y\r\n  }\r\n}\r\n\r\nexport function addAppropriateOffset(root: Element, coords: Coords) {\r\n  if (!coords || !root) {\r\n    return;\r\n  }\r\n\r\n  // if there's a custom root, then we need to offset by that root's positioning relative to the window\r\n  // before adjusting for its scroll values\r\n  if (!isDefaultScrollingElement(root)) {\r\n    const rootCoords: Coords = getElementCoords(root);\r\n    return addScrollOffset(root, {\r\n      x: coords.x - rootCoords.x,\r\n      y: coords.y - rootCoords.y\r\n    })\r\n  } else {\r\n    return addScrollOffset(root, coords);\r\n  }\r\n}\r\n\r\n// apply a common offset calculation where b is centered relative to a. If b is larger than a, the result is that a will be centered within b.\r\n// b is the moveable element: the returned value will specify where to place b to achieve centering.\r\nexport function applyCenterOffset(aCoords: Coords, aDims: Dims, b: Dims): Coords {\r\n  return {\r\n    x: aCoords.x + (aDims.width / 2) - (b.width / 2),\r\n    y: aCoords.y + (aDims.height / 2) - (b.height / 2)\r\n  }\r\n}\r\n\r\nexport function centerViewportAroundElements(root: Element, a: HTMLElement, b: HTMLElement, aPosition?: Coords, bPosition?: Coords): Coords {\r\n  if (!root || !a || !b) {\r\n    return;\r\n  }\r\n\r\n  const aCoords = aPosition || getElementCoords(a);\r\n  const bCoords = bPosition || getElementCoords(b);\r\n  const aDims = getElementDims(a);\r\n  const bDims = getElementDims(b);\r\n  const {coords, dims} = getCombinedData(aCoords, aDims, bCoords, bDims);\r\n  return centerViewportAround(root, coords, dims);\r\n}\r\n\r\nexport function centerViewportAround(root: Element, coords: Coords, dims: Dims): Coords {\r\n  return applyCenterOffset(coords, dims, getViewportDims(root));\r\n}\r\n\r\n// get the coordinates the viewport would need to be placed for the element to be centered\r\nexport function centerViewportAroundElement(root: Element, element: HTMLElement): Coords {\r\n  const elementDims: Dims = getElementDims(element);\r\n  const elementCoords: Coords = getElementCoords(element);\r\n\r\n  return centerViewportAround(root, elementCoords, elementDims);\r\n}\r\n\r\n// get the center coord of the viewport. If element is provided, the return value is the origin \r\n// which would align that element's center with the viewport center. If atViewportPosition is provided,\r\n// gets the viewport's center at that position\r\nexport function getViewportCenter(root: Element, element?: HTMLElement, atViewportPosition?: Coords): Coords {\r\n  if (!root) {\r\n    return;\r\n  }\r\n  const startCoords: Coords = atViewportPosition || getViewportStart(root);\r\n  const viewportDims: Dims = getViewportDims(root);\r\n  const elementDims: Dims = element ? getElementDims(element) : {height: 0, width: 0}\r\n\r\n  return applyCenterOffset(startCoords, viewportDims, elementDims);\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { WalktourLogic } from './Walktour';\r\nimport { WalktourStyles, defaultStyles } from '../defaultstyles';\r\n\r\ninterface TooltipProps extends WalktourLogic {\r\n  styles?: WalktourStyles;\r\n}\r\n\r\nexport function Tooltip(props: TooltipProps) {\r\n  const {\r\n    next,\r\n    prev,\r\n    close,\r\n    stepContent: {\r\n      title,\r\n      description,\r\n      customTitleRenderer,\r\n      customDescriptionRenderer,\r\n      customFooterRenderer,\r\n      disableClose,\r\n      disableNext,\r\n      disablePrev,\r\n      nextLabel,\r\n      prevLabel,\r\n      closeLabel,\r\n    },\r\n    stepIndex,\r\n    allSteps,\r\n    styles,\r\n  } = {\r\n    styles: defaultStyles,\r\n    ...props\r\n  };\r\n\r\n  const tooltipStyle: React.CSSProperties = {\r\n    ...styles.tooltip,\r\n  }\r\n\r\n  const prevDisabled: boolean = disablePrev !== undefined ? disablePrev : stepIndex === 0;\r\n  const nextDisabled: boolean = disableNext !== undefined ? disableNext : stepIndex + 1 === allSteps.length;\r\n\r\n  return (\r\n    <div style={tooltipStyle}>\r\n      {customTitleRenderer\r\n        ? customTitleRenderer(title, props)\r\n        : (title &&\r\n          <div style={styles.title}>\r\n            {title}\r\n          </div>\r\n        )\r\n      }\r\n\r\n      {customDescriptionRenderer\r\n        ? customDescriptionRenderer(description, props)\r\n        : (\r\n          <div style={styles.description}>\r\n            {description}\r\n          </div>\r\n        )\r\n      }\r\n\r\n      {customFooterRenderer\r\n        ? customFooterRenderer(props)\r\n        : (\r\n          <div style={styles.footer}>\r\n            <button \r\n            onClick={() => close()} \r\n            style={{...styles.tertiaryButton, ...disableClose && styles.disabledButton}}\r\n            disabled={disableClose}\r\n            >\r\n              {closeLabel || \"close\"}\r\n            </button>\r\n            <button\r\n              onClick={prev}\r\n              disabled={prevDisabled}\r\n              style={{...styles.secondaryButton, ...prevDisabled && styles.disabledButton}}\r\n            >\r\n              {prevLabel || \"prev\"}\r\n            </button>\r\n            <button\r\n              onClick={() => next()}\r\n              disabled={nextDisabled}\r\n              style={{...styles.primaryButton, ...nextDisabled && styles.disabledButton}}\r\n            >\r\n              {nextLabel || \"next\"}\r\n            </button>\r\n          </div>\r\n        )}\r\n    </div>\r\n  )\r\n}","import { CSSProperties } from \"react\";\r\n\r\n\r\nexport interface WalktourStyles {\r\n  tooltip: CSSProperties;\r\n  footer: CSSProperties;\r\n  title: CSSProperties;\r\n  description: CSSProperties;\r\n  primaryButton: CSSProperties;\r\n  secondaryButton: CSSProperties;\r\n  tertiaryButton: CSSProperties;\r\n  disabledButton: CSSProperties;\r\n}\r\n\r\nconst contentMargin: number = 4;\r\nconst baseButtonStyle: React.CSSProperties = {\r\n  cursor: 'pointer',\r\n  padding: '4px 16px', \r\n  textAlign: 'center',\r\n  border: 0,\r\n  borderRadius: 3,\r\n  backgroundColor: '#0084ff',\r\n  color: '#fff',\r\n  fontSize: 14,\r\n  margin: contentMargin\r\n};\r\n\r\nexport const defaultStyles: WalktourStyles = {\r\n  tooltip: {\r\n    display: 'flex', \r\n    flexDirection: 'column', \r\n    zIndex: 9999,\r\n    // fontFamily: 'Roboto, sans-serif',\r\n    // fontSize: 14,\r\n    backgroundColor: 'white',\r\n    // padding: '10px 10px 5px 10px',\r\n    borderRadius: '5px',\r\n    boxShadow: '0 3px 8px 0 rgba(0,0,0,.25)',\r\n    // color: '#4d4d4d',\r\n    // minWidth: 215, //so that buttons have adequate spacing\r\n    // maxWidth: 285,\r\n  },\r\n  footer: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: contentMargin\r\n  },\r\n  title: {\r\n    margin: contentMargin,\r\n    fontSize: 24,\r\n  },\r\n  description: {\r\n    margin: contentMargin,\r\n  },\r\n  primaryButton: {\r\n    ...baseButtonStyle,\r\n    backgroundColor: \"#0084ff\",\r\n    color: \"#ffffff\"\r\n  },\r\n  secondaryButton: {\r\n    ...baseButtonStyle,\r\n    backgroundColor: \"#8400ff\",\r\n    color: \"#fff\",\r\n    border: \"solid 1px #8400ff\"\r\n  },\r\n  tertiaryButton: {\r\n    ...baseButtonStyle,\r\n    marginRight: 'auto',\r\n    backgroundColor: `transparent`,\r\n    color: \"#025c53\",\r\n    border: \"solid 1px #025c53\"\r\n  },\r\n  disabledButton: {\r\n    ...baseButtonStyle,\r\n    backgroundColor: \"#bebebe\",\r\n    color: \"#989898\",\r\n    cursor: \"default\"\r\n  },\r\n}","import { Coords } from \"./dom\";\r\nimport { addAppropriateOffset, centerViewportAroundElement } from \"./offset\";\r\n\r\nexport function scrollToElement(root: Element, element: HTMLElement, disableSmoothScrolling?: boolean): void {\r\n  if (!root || !element) {\r\n    return;\r\n  }\r\n\r\n  const coords = addAppropriateOffset(root, centerViewportAroundElement(root, element));\r\n\r\n  scrollToDestination(root, coords, disableSmoothScrolling);\r\n}\r\n\r\nexport function scrollToDestination(root: Element, destination: Coords, disableSmoothScrolling?: boolean): void {\r\n  if (!root || !destination) {\r\n    return;\r\n  }\r\n  // check if the 'scrollBehavior' property is supported. Support for this property is consistent\r\n  // with support for scrollToOptions, and if it's supported we can scroll smoothly\r\n  const smoothScrollingIsSupported = 'scrollBehavior' in document.documentElement.style;\r\n  if (smoothScrollingIsSupported && !disableSmoothScrolling) {\r\n    const scrollOptions: ScrollToOptions = {\r\n      top: destination.y,\r\n      left: destination.x,\r\n      behavior: 'smooth'\r\n    }\r\n\r\n    root.scrollTo(scrollOptions);\r\n  } else {\r\n    root.scrollTop = destination.y;\r\n    root.scrollLeft = destination.x;\r\n  }\r\n}","import { Coords, dist, Dims, areaDiff, fitsWithin, getElementDims, getEdgeFocusables, isForeignTarget } from \"./dom\";\r\nimport { getTargetPosition, GetTooltipPositionArgs, getTooltipPosition, OrientationCoords } from \"./positioning\";\r\nimport { isElementInView, getViewportDims } from \"./viewport\";\r\nimport { TAB_KEYCODE } from \"./constants\";\r\n\r\n//miscellaneous tour utilities\r\n\r\nexport function debounce<T extends any[]>(f: (...args: T) => void, interval: number = 300) {\r\n  let timeoutId: number;\r\n  return (...args: T) => {\r\n    if (timeoutId) {\r\n      window.clearTimeout(timeoutId);\r\n    }\r\n    timeoutId = window.setTimeout(() => f(...args), interval);\r\n  }\r\n}\r\n\r\nexport function getIdString(base: string, identifier?: string): string {\r\n  return `${base}${identifier ? `-${identifier}` : ``}`\r\n}\r\n\r\nexport function setTargetWatcher(callback: () => void, interval: number): (() => void) {\r\n  const intervalId: number = window.setInterval(callback, interval);\r\n\r\n  return () => window.clearInterval(intervalId);\r\n}\r\n\r\nexport interface SetTourUpdateListenerArgs {\r\n  update: () => void;\r\n  customSetListener?: (update: () => void) => void;\r\n  customRemoveListener?: (update: () => void) => void;\r\n  event?: string; // default is resize event\r\n}\r\n\r\nexport function setTourUpdateListener(args: SetTourUpdateListenerArgs) {\r\n  const { update, customSetListener, customRemoveListener, event } = { event: 'resize', ...args }\r\n  if (customSetListener && customRemoveListener) {\r\n    customSetListener(update);\r\n    return () => customRemoveListener(update);\r\n  } else {\r\n    window.addEventListener(event, update)\r\n    return () => window.removeEventListener(event, update);\r\n  }\r\n}\r\n\r\ninterface FocusTrapArgs {\r\n  start: HTMLElement;\r\n  end: HTMLElement;\r\n  beforeStart?: HTMLElement;\r\n  afterEnd?: HTMLElement;\r\n  // element that should be excluded from the focus trap but may obtain focus.\r\n  // any focus changes from this element will be directed back to the trap.\r\n  // behavior is based on \"verify address\" example from https://www.w3.org/TR/wai-aria-practices/examples/dialog-modal/dialog.html\r\n  lightningRod?: HTMLElement;\r\n}\r\n\r\n// helper function to create a keyboard focus trap, potentially including multiple elements\r\nfunction getFocusTrapHandler(args: FocusTrapArgs): (e: KeyboardEvent) => void {\r\n  const { start, end, beforeStart, afterEnd, lightningRod } = args;\r\n  return (e: KeyboardEvent) => {\r\n    if (e.keyCode === TAB_KEYCODE) {\r\n      if (e.shiftKey && e.target === start) {\r\n        e.preventDefault();\r\n        beforeStart ? beforeStart.focus() : end.focus();\r\n      } else if (!e.shiftKey && e.target === end) {\r\n        e.preventDefault();\r\n        afterEnd ? afterEnd.focus() : start.focus();\r\n      } else if (e.target === lightningRod) {\r\n        e.preventDefault();\r\n        start.focus();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const setFocusTrap = (tooltipContainer: HTMLElement, target?: HTMLElement, disableMaskInteraction?: boolean): (() => void) => {\r\n  if (!tooltipContainer) {\r\n    return;\r\n  }\r\n\r\n  const { start: tooltipFirst, end: tooltipLast } = getEdgeFocusables(tooltipContainer, tooltipContainer);\r\n  const { start: targetFirst, end: targetLast } = getEdgeFocusables(undefined, target, true);\r\n\r\n  let tooltipBeforeStart: HTMLElement;\r\n  let tooltipAfterEnd: HTMLElement;\r\n  let targetTrapHandler: (e: KeyboardEvent) => void;\r\n\r\n  if (target && !disableMaskInteraction && targetFirst && targetLast) {\r\n    tooltipAfterEnd = targetFirst;\r\n    tooltipBeforeStart = targetLast;\r\n    targetTrapHandler = getFocusTrapHandler({ start: targetFirst, end: targetLast, beforeStart: tooltipLast, afterEnd: tooltipFirst })\r\n    target.addEventListener('keydown', targetTrapHandler);\r\n  }\r\n\r\n  const tooltipTrapHandler = getFocusTrapHandler({ start: tooltipFirst, end: tooltipLast, beforeStart: tooltipBeforeStart, afterEnd: tooltipAfterEnd, lightningRod: tooltipContainer });\r\n  tooltipContainer.addEventListener('keydown', tooltipTrapHandler);\r\n\r\n  return () => {\r\n    if (target) {\r\n      target.removeEventListener('keydown', targetTrapHandler);\r\n    }\r\n\r\n    tooltipContainer.removeEventListener('keydown', tooltipTrapHandler);\r\n  }\r\n}\r\n\r\ninterface NaiveShouldScrollArgs {\r\n  root: Element;\r\n  tooltip: HTMLElement;\r\n  tooltipPosition: Coords;\r\n  target: HTMLElement;\r\n}\r\n\r\nfunction naiveShouldScroll(args: NaiveShouldScrollArgs): boolean {\r\n  const { root, tooltip, tooltipPosition, target } = args;\r\n\r\n  if (!isElementInView(root, tooltip, tooltipPosition)) {\r\n    return true;\r\n  }\r\n\r\n  if (!isElementInView(root, target)) {\r\n    return fitsWithin(getElementDims(target), getViewportDims(root));\r\n  }\r\n\r\n  return false;\r\n}\r\nexport interface ShouldScrollArgs extends NaiveShouldScrollArgs {\r\n  disableAutoScroll?: boolean;\r\n  allowForeignTarget?: boolean;\r\n  selector?: string;\r\n}\r\n\r\nexport function shouldScroll(args: ShouldScrollArgs): boolean {\r\n  const { root, tooltip, target, disableAutoScroll, allowForeignTarget, selector: targetSelector } = args;\r\n  if (!root || !tooltip || !target) {\r\n    return false;\r\n  }\r\n\r\n  if (disableAutoScroll) {\r\n    return false;\r\n  }\r\n\r\n  if (allowForeignTarget && targetSelector) {\r\n    return !isForeignTarget(root, targetSelector);\r\n  }\r\n  return naiveShouldScroll({ ...args });\r\n}\r\n\r\nexport interface TargetChangedArgs {\r\n  root: Element;\r\n  target: HTMLElement;\r\n  targetCoords: Coords;\r\n  targetDims: Dims;\r\n  rerenderTolerance: number;\r\n}\r\nexport function targetChanged(args: TargetChangedArgs): boolean {\r\n  const { root, target, targetCoords, targetDims, rerenderTolerance } = args;\r\n  if (!target && !targetCoords && !targetDims) {\r\n    return false;\r\n  }\r\n\r\n  // when the target / target data are out of sync. usually due to a movingTarget, i.e. the target arg is more up to date than the pos/dims args\r\n  if ((!target && targetCoords && targetDims) || (target && !targetCoords && !targetDims)) {\r\n    return true;\r\n  }\r\n\r\n  const currentTargetSize: Dims = getElementDims(target);\r\n  const currentTargetPosition: Coords = getTargetPosition(root, target);\r\n\r\n  const sizeChanged: boolean = areaDiff(currentTargetSize, targetDims) > rerenderTolerance;\r\n  const positionChanged: boolean = dist(currentTargetPosition, targetCoords) > rerenderTolerance;\r\n\r\n  return sizeChanged || positionChanged;\r\n}\r\n\r\nexport interface TooltipDesyncArgs extends GetTooltipPositionArgs {\r\n tooltipPosition: Coords;\r\n}\r\n\r\n// if there's no target, we need to ensure that the tooltip is centered, even if the window/container/scroll changes \r\n// if a target exists, there's not a tooltip desync in this context; there are two other functions\r\n// to determine if the tooltip/target are out of sync - this is solely for non-target cases\r\nexport function tooltipDesync(args: TooltipDesyncArgs): boolean {\r\n  const { target, root, tooltip, tooltipPosition: currentPosition } = args;\r\n  if (target || !root || !tooltip) {\r\n    return false;\r\n  }\r\n\r\n  const newPosition: OrientationCoords = getTooltipPosition({...args})\r\n\r\n  // if there's a difference between the newly calculated position and the current position, we need to update\r\n  return dist(newPosition.coords, currentPosition) !== 0;\r\n  \r\n}\r\n\r\nexport interface ShouldUpdateArgs extends TargetChangedArgs, ShouldScrollArgs, TooltipDesyncArgs { }\r\n\r\nexport function shouldUpdate(args: ShouldUpdateArgs): boolean {\r\n  const { root, tooltip } = args;\r\n  if (!root || !tooltip) {\r\n    return false; // bail if these aren't present; need them for calculations\r\n  }\r\n\r\n  return targetChanged({ ...args }) || shouldScroll({ ...args }) || tooltipDesync({...args})\r\n}\r\n\r\nexport const takeActionIfValid = async (action: () => void, actionValidator?: () => Promise<boolean>) => {\r\n  if (actionValidator) {\r\n    const valid: boolean = await actionValidator();\r\n    if (valid) {\r\n      action();\r\n    }\r\n  } else {\r\n    action();\r\n  }\r\n}\r\n\r\nexport const setNextOnTargetClick = (target: HTMLElement, next: (fromTarget?: boolean) => void, validateNext?: () => Promise<boolean>): (() => void) => {\r\n  if (!target) {\r\n    return;\r\n  }\r\n\r\n  // if valid, call a handler which 1. calls the tetheredAction function and 2. removes itself from the target\r\n  const clickHandler = () => {\r\n    const actionWithCleanup = () => {\r\n      next(true);\r\n      target.removeEventListener('click', clickHandler);\r\n    }\r\n\r\n    takeActionIfValid(actionWithCleanup, validateNext)\r\n  }\r\n\r\n  target.addEventListener('click', clickHandler);\r\n  return () => target.removeEventListener('click', clickHandler); // return so we can remove the event elsewhere if the action doesn't get called\r\n}"],"names":[],"version":3,"file":"index.js.map"}